<% unless @promo_code %>
  $('.promo-code-error').html("This code is invalid or already used.").css('display', 'block');;
<% end %>

<% if @success %>
  //desktop-display
  $(".show-cart-page .header-checkout").html("<%= j render(partial: 'listings/carts/header_checkout', locals: { promo_code: @promo_code, shipping_type: @shipping_type }) %>");
  $(".show-cart-page .desktop-cart-listings").html("<%= j render(partial: 'listings/carts/list_listing', locals: { promo_code: @promo_code }) %>");
  $(".show-cart-page .checkout-box").html("<%= j render(partial: 'listings/carts/checkout_box', locals: { promo_code: @promo_code, shipping_type: @shipping_type }) %>");
  $(".show-cart-page .shipping-box").html("<%= j render(partial: 'listings/carts/shipping_box', locals: { zipcode:  params[:zipcode] }) %>");
  //mobile-display
  $(".show-cart-page .mobile-cart-listings").html("<%= j render(partial: 'listings/carts/mobile/list_listing', locals: { promo_code: @promo_code }) %>");
  // Change number show on cart
  $(".number-on-cart").html(<%= @cart_total_items %>);
  $(".number-item-in-cart").html(<%= @cart_total_items %>);
  divListingId = "#wrap-item-cart-" + <%= @listing.id %>;

  if ($(divListingId).length)
    quantityNumber = "#quantity-item-" + <%= @listing.id %>;
    $(quantityNumber).html(<%= @item_count %>);
<% else %>
  swal("Failure!", '<%= @message %>', "error");
  //desktop-display
  $(".show-cart-page .desktop-cart-listings").html("<%= j render(partial: 'listings/carts/list_listing', locals: { promo_code: @promo_code }) %>");
  //mobile-display
  $(".show-cart-page .mobile-cart-listings").html("<%= j render(partial: 'listings/carts/mobile/list_listing', locals: { promo_code: @promo_code }) %>");
<% end %>
